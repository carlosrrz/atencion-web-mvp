<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Estudiante – Proctoring</title>
  <style>
    .cam-card { max-width: 980px; margin: 24px auto; padding: 16px; background:#fff; border-radius:12px; box-shadow:0 6px 24px rgba(0,0,0,.06);}
    .row { margin: 12px 0; }
    .pill { display:inline-block; padding:4px 10px; border-radius:999px; background:#eef; color:#223; font-size:12px; }
    .btn { padding:10px 14px; border-radius:8px; border:none; cursor:pointer; margin-right:8px; }
    .btn-primary { background:#3b82f6; color:#fff; }
    .btn-warn { background:#e11d48; color:#fff; }
    .btn-ghost { background:#eef; color:#111; }
    .cam-wrap { position: relative; width: 100%; max-width: 980px; aspect-ratio: 16 / 9; background:#000; border-radius:12px; overflow:hidden; }
    #cam { width:100%; height:100%; object-fit:cover; display:block; }
    #canvas { position:absolute; inset:0; width:100%; height:100%; pointer-events:none; }
    /* evita la “doble cámara”: solo existe este bloque */
  </style>
</head>
<body>

  <div class="cam-card">
    <h2>Cámara</h2>
    <div class="row">
      Estado: <span id="cam-status" class="pill">Permiso pendiente</span>
      <span id="cam-help" class="pill" style="margin-left:6px; display:none;"></span>
    </div>

    <div class="row">
      <button id="btn-permitir"  class="btn btn-primary">Permitir cámara</button>
      <button id="btn-reintentar" class="btn btn-ghost">Reintentar</button>
    </div>

    <div class="cam-wrap">
      <video id="cam" playsinline autoplay muted></video>
      <canvas id="canvas"></canvas>
    </div>

    <div class="row" style="margin-top:14px;">
      <button id="btn-start" class="btn btn-primary">Iniciar monitoreo</button>
      <button id="btn-stop"  class="btn btn-warn">Finalizar y exportar</button>

      <span class="pill" id="session-status" style="margin-left:12px;">Detenida</span>
      <span class="pill" id="session-time" style="margin-left:6px;">00:00</span>
    </div>
  </div>

  <!-- Carga de scripts (asegúrate de que las rutas EXISTAN) -->
  <script type="module" src="/js/app.js" defer></script>
  <script type="module" src="/js/exam.js" defer></script>
</body>
</html>
